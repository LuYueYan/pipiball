var egret=window.egret,__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);r.prototype=t.prototype,e.prototype=new r},__awaiter=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))(function(i,n){function a(e){try{l(o.next(e))}catch(t){n(t)}}function s(e){try{l(o["throw"](e))}catch(t){n(t)}}function l(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(a,s)}l((o=o.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function r(e){return function(t){return o([e,t])}}function o(r){if(i)throw new TypeError("Generator is already executing.");for(;l;)try{if(i=1,n&&(a=n[2&r[0]?"return":r[0]?"throw":"next"])&&!(a=a.call(n,r[1])).done)return a;switch(n=0,a&&(r=[0,a.value]),r[0]){case 0:case 1:a=r;break;case 4:return l.label++,{value:r[1],done:!1};case 5:l.label++,n=r[1],r=[0];continue;case 7:r=l.ops.pop(),l.trys.pop();continue;default:if(a=l.trys,!(a=a.length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){l=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){l.label=r[1];break}if(6===r[0]&&l.label<a[1]){l.label=a[1],a=r;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(r);break}a[2]&&l.ops.pop(),l.trys.pop();continue}r=t.call(e,l)}catch(o){r=[6,o],n=0}finally{i=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var i,n,a,s,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:r(0),"throw":r(1),"return":r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},getLifeModal=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.partAdded=function(t,r){e.prototype.partAdded.call(this,t,r)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.videoBtn?this.init():this.addEventListener(egret.Event.COMPLETE,this.init,this)},t.prototype.init=function(){var e=this,t=setInterval(function(){userDataMaster.life>=5&&userDataMaster.seconds<=0&&(clearInterval(t),userDataMaster.seconds=0),e.timeText.text="还差"+e.getFormat(userDataMaster.seconds)+"恢复1点体力"},1e3);e.shareTimes.text="("+userDataMaster.dayShareLife.num+"/5)",this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeFun,this),this.videoBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.videoFun,this),this.shareBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.shareFun,this)},t.prototype.getFormat=function(e){var t=Math.floor(e/60),r=e%60,o=10>r?"0"+r:r+"";return"0"+t+":"+o},t.prototype.closeFun=function(){sceneMaster.closeModal()},t.prototype.videoFun=function(){function e(){userDataMaster.myLife++}AdMaster.useVideo(function(){e()},function(){CallbackMaster.openShare(function(){e()})})},t.prototype.shareFun=function(){userDataMaster.todayShareLife?CallbackMaster.openShare(function(){userDataMaster.dayShareLife.num++,userDataMaster.myLife=userDataMaster.life+1}):platform.showModal({title:"温馨提示",content:"今日获取次数已用完，请明日再来"})},t}(eui.Component);__reflect(getLifeModal.prototype,"getLifeModal",["eui.UIComponent","egret.DisplayObject"]);var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,r){function o(o){t.call(r,o,e)}if(RES.hasRes(e)){var i=RES.getRes(e);i?o(i):RES.getResAsync(e,o,this)}else RES.getResByUrl(e,o,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var Main=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(e){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var t=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",t),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(e){console.log(e)})},t.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return DeviceMaster.init(this.stage.stageWidth,this.stage.stageHeight),userDataMaster.init(),[4,this.loadResource()];case 1:return e.sent(),this.createGameScene(),[2]}})})},t.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),e=new LoadingUI,this.stage.addChild(e),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return r.sent(),[4,this.loadTheme()];case 2:return r.sent(),[4,RES.loadGroup("preload",0,e)];case 3:return r.sent(),this.stage.removeChild(e),[3,5];case 4:return t=r.sent(),console.error(t),[3,5];case 5:return[2]}})})},t.prototype.loadTheme=function(){var e=this;return new Promise(function(t,r){var o=new eui.Theme("resource/default.thm.json",e.stage);o.addEventListener(eui.UIEvent.COMPLETE,function(){t()},e)})},t.prototype.createGameScene=function(){CallbackMaster.init(),AdMaster.init(),sceneMaster.init(this.stage),sceneMaster.changeScene(new startScene),movieMaster.init()},t.prototype.createBitmapByName=function(e){var t=new egret.Bitmap,r=RES.getRes(e);return t.texture=r,t},t.prototype.onButtonClick=function(e){var t=new eui.Panel;t.title="Title",t.horizontalCenter=0,t.verticalCenter=0,this.addChild(t)},t}(eui.UILayer);__reflect(Main.prototype,"Main");var DebugPlatform=function(){function e(){this.openDataContext={createDisplayObject:function(e,t,r){},postMessage:function(e){}}}return e.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{nickName:"username"}]})})},e.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{code:""}]})})},e.prototype.onShareAppMessage=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.shareAppMessage=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.createUserInfoButton=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.vibrateShort=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.vibrateLong=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.navigateToMiniProgram=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.setUserCloudStorage=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.getUserCloudStorage=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.createRewardedVideoAd=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.createBannerAd=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.getSystemInfoSync=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{screenWidth:750,screenHeight:1334}]})})},e.prototype.setStorage=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.getStorage=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.removeStorage=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.onShow=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(r){return t={scene:"",query:{},shareTicket:"",referrerInfo:{appId:"",extraData:{type:"openMiniApp",openMiniAppId:""}}},e&&e(t),[2]})})},e.prototype.offShow=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.onHide=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.offHide=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.previewImage=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.exitMiniProgram=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.showModal=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.setClipboardData=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.getLaunchOptionsSync=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,r,o){function i(e){t.call(o,e)}function n(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,n,null),r.call(o))}var a=this;if("undefined"!=typeof generateEUI)egret.callLater(function(){t.call(o,generateEUI)},this);else if("undefined"!=typeof generateEUI2)RES.getResByUrl("resource/gameEui.json",function(e,r){window.JSONParseClass.setData(e),egret.callLater(function(){t.call(o,generateEUI2)},a)},this,RES.ResourceItem.TYPE_JSON);else if("undefined"!=typeof generateJSON)if(e.indexOf(".exml")>-1){var s=e.split("/");s.pop();var l=s.join("/")+"_EUI.json";generateJSON.paths[e]?egret.callLater(function(){t.call(o,generateJSON.paths[e])},this):RES.getResByUrl(l,function(r){window.JSONParseClass.setData(r),egret.callLater(function(){t.call(o,generateJSON.paths[e])},a)},this,RES.ResourceItem.TYPE_JSON)}else egret.callLater(function(){t.call(o,generateJSON)},this);else RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,n,null),RES.getResByUrl(e,i,this,RES.ResourceItem.TYPE_TEXT)},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var ballCom=function(){function e(){this.type=3,this.isRemoved=!1,this.init()}return e.prototype.init=function(){this.img=this.createBitmapByName(userDataMaster.bulletArr[userDataMaster.bulletIndex].img),this.img.width=82,this.img.height=86,this.img.anchorOffsetX=this.img.width/2,this.img.anchorOffsetY=this.img.height/2},e.prototype.createBody=function(e,t,r){var o=new p2.Box({width:1.92,height:1.92});return o.collisionGroup=2,o.collisionMask=5,o.sensor=!0,this.boxBody=new p2.Body({mass:100,position:[e,t],type:p2.Body.KINEMATIC}),this.boxBody.addShape(o),this.boxBody.displays=[this.img],r.addChild(this.img),egret.Tween.get(this.img,{loop:!0}).to({scaleX:.9,scaleY:1.1},200).to({scaleX:1,scaleY:1},100),this.boxBody},e.prototype.updateText=function(e,t){void 0===t&&(t=null);var r=this,o=movieMaster.getGif("bullet");o.x=this.img.x-100,o.y=this.img.y-100,e.addChild(o),o.gotoAndPlay(1,1),o.addEventListener(egret.Event.COMPLETE,function(e){o.parent&&o.parent.removeChild(o)},this),r.boxBody.shapes[0].collisionMask=0,r.isRemoved=!0,setTimeout(function(){r.boxBody.type=p2.Body.DYNAMIC,r.boxBody.gravityScale=0,r.boxBody.velocity=[0,-10],r.boxBody.angularVelocity=2;var o=(r.boxBody.position[1]-e.getPosition(935))/10;setTimeout(function(){e.world.removeBody(r.boxBody),r.img.parent&&r.img.parent.removeChild(r.img),t&&t()},1e3*o)},1e3)},e.prototype.createBitmapByName=function(e){var t=new egret.Bitmap,r=RES.getRes(e+"_png");return t.texture=r,t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2,t},e}();__reflect(ballCom.prototype,"ballCom"),window.ballCom=ballCom;var beeCom=function(){function e(){this.adaptation=0,this.power=1,this.init()}return e.prototype.init=function(){this.img=this.createBitmapByName(userDataMaster.bulletArr[userDataMaster.bulletIndex].img),this.img.width=58,this.img.height=63,this.img.anchorOffsetX=this.img.width/2,this.img.anchorOffsetY=this.img.height/2},e.prototype.createBody=function(e,t,r){void 0===t&&(t=7.5),void 0===r&&(r=0);var o=new p2.Box({width:.5,height:1.26});return o.collisionGroup=1,o.collisionMask=2,0==r&&(r=e.getPosition(900)),this.boxBody=new p2.Body({mass:100,position:[t,r]}),this.boxBody.gravityScale=1,this.boxBody.addShape(o),e.world.addBody(this.boxBody),this.boxBody.displays=[this.img],e.addChild(this.img),this.boxBody},e.prototype.powerUp=function(e){void 0===e&&(e=1),this.power=e,2==e?this.img.texture=RES.getRes("img_lightning_02_png"):1==e&&(this.img.texture=RES.getRes(userDataMaster.bulletArr[userDataMaster.bulletIndex].img+"_png"))},e.prototype.createBitmapByName=function(e){var t=new egret.Bitmap,r=RES.getRes(e+"_png");return t.texture=r,t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2,t},e}();__reflect(beeCom.prototype,"beeCom"),window.beeCom=beeCom;var gridCom=function(){function e(e){void 0===e&&(e=1),this.itemW=96,this.num=1,this.type=1,this.isRemoved=!1,this.num=e;var t=Math.random();.1>t?this.type=2:.3>t?this.type=5:.45>t&&(this.type=6),this.init()}return e.prototype.onLoadComplete=function(e){},e.prototype.init=function(){if(1==this.type){var e="img_diamonds_a1";Math.random()>.7&&(e="img_diamonds_c1"),this.img=this.createBitmapByName(e)}else 2==this.type?this.img=this.createBitmapByName("img_diamonds_b1"):5==this.type?this.img=this.createBitmapByName("img_diamonds_e1"):this.img=this.createBitmapByName("img_diamonds_d1");this.img.anchorOffsetX=this.img.width/2,this.img.anchorOffsetY=this.img.height/2,this.txt=new egret.BitmapText,this.font=RES.getRes("stripe_text_fnt"),this.txt.font=this.font,this.txt.text=this.num+"",this.txt.width=this.itemW,this.txt.textAlign="center",this.txt.anchorOffsetX=this.img.width/2,this.txt.anchorOffsetY=this.img.height/1.9,this.txt.scaleX=.8,this.txt.scaleY=.8},e.prototype.createBody=function(e,t,r){var o;if(2==this.type){var i=[[1,-1],[1,1],[-1,1]];o=new p2.Convex({vertices:i})}else o=new p2.Box({width:1.9,height:1.9});if(o.collisionGroup=6,o.collisionMask=7,this.boxBody=new p2.Body({mass:100,position:[e,t],type:p2.Body.KINEMATIC}),this.boxBody.addShape(o),6==this.type){this.boxBody.type=p2.Body.DYNAMIC,this.boxBody.gravityScale=0;var n=this;setTimeout(function(){n.boxBody.velocity=[.5,0]},100)}return this.boxBody.fixedRotation=!1,this.boxBody.displays=[this.img,this.txt],r.addChild(this.img),r.addChild(this.txt),this.boxBody},e.prototype.updateText=function(e,t,r){void 0===t&&(t=1),void 0===r&&(r=null);var o=new egret.BitmapText;o.font=this.font;t>this.num?this.num+"":t+"";o.text=t>this.num?this.num+"":t+"";var i=90*Math.random()-45;if(o.x=this.img.x+i,o.y=this.img.y-80,e.addChild(o),egret.Tween.removeTweens(this.img),egret.Tween.get(this.img).to({y:this.img.y-10},20).to({y:this.img.y},20),egret.Tween.get(o).to({scaleX:1.2,scaleY:1.2,y:o.y-80},500).to({alpha:.5},200).call(function(){o.parent&&o.parent.removeChild(o)}),this.num>t)this.num-=t,this.txt.text=this.num+"";else{this.isRemoved=!0,e.world.removeBody(this.boxBody),this.img.parent&&this.img.parent.removeChild(this.img),this.txt.parent&&this.txt.parent.removeChild(this.txt);var n=2==this.type?1:this.type,a=movieMaster.getGif("boom_"+n),s=5==this.type?250:200;a.x=this.img.x-s/2,a.y=this.img.y-s/2,e.addChild(a),a.gotoAndPlay(1,1),a.addEventListener(egret.Event.COMPLETE,function(e){a.parent&&a.parent.removeChild(a)},this);var l={};if(5==this.type)for(var u=e.adaptParams.itemWidth/e.factor,d=function(t,o){var i=e.gridArr[t],n=Math.floor(100*Math.abs(i.boxBody.position[0]-c.boxBody.position[0]))/100,a=Math.floor(100*Math.abs(i.boxBody.position[1]-c.boxBody.position[1]))/100;if(i.boxBody.id!=c.boxBody.id&&u>=n&&u>=a)if(console.log("boom",i.type),3==i.type){if(!i.isRemoved){e.shootPoint.beeNum++;var s=i.boxBody.position[0];i.updateText(e,function(){var t=new beeCom;t.createBody(e,s),e.beeArr.push(t)})}}else 4==i.type||i.isRemoved||(console.log(55555),i.updateText(e,i.num,r))},c=this,h=0,p=e.gridArr.length;p>h;h++)d(h,p);r&&r(l)}},e.prototype.createBitmapByName=function(e){var t=new egret.Bitmap,r=RES.getRes(e+"_png");return t.texture=r,t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2,t},e}();__reflect(gridCom.prototype,"gridCom"),window.gridCom=gridCom;var starCom=function(){function e(){this.type=4,this.isRemoved=!1,this.init()}return e.prototype.init=function(){this.img=this.createBitmapByName("img_lightning_01")},e.prototype.createBody=function(e,t,r){var o=new p2.Box({width:1.92,height:1.92});return o.collisionGroup=2,o.collisionMask=5,o.sensor=!0,this.boxBody=new p2.Body({mass:100,position:[e,t],type:p2.Body.KINEMATIC}),this.boxBody.addShape(o),this.boxBody.displays=[this.img],r.addChild(this.img),this.boxBody},e.prototype.updateText=function(e,t){void 0===t&&(t=null);var r=this;if(r.isRemoved=!0,!this.gif){var o=movieMaster.getGif("lightning");o.x=this.img.x-90,o.y=this.img.y-90,this.gif=o,o.addEventListener(egret.Event.COMPLETE,function(e){o.parent&&o.parent.removeChild(o)},this)}e.addChild(this.gif),this.gif.gotoAndPlay(1,1),t&&t()},e.prototype.createBitmapByName=function(e){var t=new egret.Bitmap,r=RES.getRes(e+"_png");return t.texture=r,t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2,t},e}();__reflect(starCom.prototype,"starCom"),window.starCom=starCom;var tweenButton=function(e){function t(){var t=e.call(this)||this;return t.osx=t.scaleX,t.osy=t.scaleY,t}return __extends(t,e),t.prototype.onTouchCancle=function(t){e.prototype.onTouchCancle.call(this,t);var r=egret.Tween.get(this);r.to({scaleX:this.osx,scaleY:this.osy},60)},t.prototype.onTouchBegin=function(t){e.prototype.onTouchBegin.call(this,t);var r=egret.Tween.get(this);r.to({scaleX:.8*this.osx,scaleY:.8*this.osy},60)},t.prototype.buttonReleased=function(){e.prototype.buttonReleased.call(this);var t=egret.Tween.get(this);t.to({scaleX:this.osx,scaleY:this.osy},60)},t}(eui.Button);__reflect(tweenButton.prototype,"tweenButton"),window.tweenButton=tweenButton;var AdMaster=function(){function e(){}return e.getInstance=function(){return e.shared||(e.shared=new e),e.shared},e.init=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(r){switch(r.label){case 0:return t=this,e.INIT_STATUS=1,[4,this.list()];case 1:return r.sent(),[2]}})})},e.list=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,ServiceMaster.post(ServiceMaster.getConfig,{},function(t){1===parseInt(t.code)&&t.data&&(1==t.data.edition_1&&(CallbackMaster.hasChecked=!0),void 0!==t.data.banner_id&&null!=t.data.banner_id&&t.data.banner_id.length>0&&(e.banner=t.data.banner_id,e.hasBanner=!0,e.randomCacheBannerAd()),void 0!==t.data.video_id&&null!=t.data.video_id&&t.data.video_id.length>0&&(e.video=t.data.video_id,e.hasVideo=!0,e.randomCacheVideoAd()),e.INIT_STATUS=2)},function(t){e.INIT_STATUS=3})];case 1:return t.sent(),[2]}})})},e.randomCacheVideoAd=function(){e.video&&(e.cacheVideoAd=platform.createRewardedVideoAd(e.video[Math.floor(Math.random()*e.video.length)]),e.cacheVideoAd.onError(function(t){console.log(1,t),e.noVideo=!0}))},e.randomCacheBannerAd=function(){e.banner&&(e.cacheBannerAd=platform.createBannerAd(e.banner[Math.floor(Math.random()*e.banner.length)],{}),e.cacheBannerAd.onError(function(e){console.log(e)}))},e.openVideoAd=function(t,r){void 0===t&&(t=null),void 0===r&&(r=null),e.cacheVideoAd&&(e.cacheVideoAd.show().then(function(){})["catch"](function(t){e.cacheVideoAd.load(),r(t)}),e.cacheVideoAd.onClose(t))},e.openBannerAd=function(t){void 0===t&&(t={});var r=setInterval(function(){e.INIT_STATUS>1&&(e._openBannerAd(t),clearInterval(r))},50)},e._openBannerAd=function(t){e.cacheBannerAd&&(e.cacheBannerAd.style.width=DeviceMaster.getX(t.width)||DeviceMaster.screenWidth,e.cacheBannerAd.style.left=DeviceMaster.getX(t.left)||0,e.cacheBannerAd.style.top=DeviceMaster.getY(t.top)||0,t.height&&(e.cacheBannerAd.style.height=DeviceMaster.getY(t.height)),e.cacheBannerAd.show(),e.cacheBannerAd.onResize(function(t){var r=t.height*DeviceMaster.screenWidth/t.width;e.cacheBannerAd.style.width=DeviceMaster.screenWidth,e.cacheBannerAd.style.top=DeviceMaster.screenHeight-r,DeviceMaster.stageHeight>1600&&(e.cacheBannerAd.style.top-=40)}))},e.closeBannerAd=function(){e.cacheBannerAd&&e.cacheBannerAd.hide()},e.useVideo=function(t,r){if(void 0===t&&(t=null),void 0===r&&(r=null),e.cacheVideoAd)if(e.noVideo)platform.showModal({title:"温馨提示",content:"今日视频次数已经用完，请明日再来哦~"});else{var o=!0;e.openVideoAd(function(e){(e&&e.isEnded||void 0===e)&&o&&t&&t(),t=null,o=!1})}else r&&r()},e.banner=[],e.hasBanner=!1,e.video=[],e.hasVideo=!1,e.cacheVideoAd=null,e.haveMoreVideo=!0,e.cacheBannerAd=null,e.INIT_STATUS=0,e.closeSuccess=null,e.initClose=!1,e.noVideo=!1,e}();__reflect(AdMaster.prototype,"AdMaster"),window.AdMaster=AdMaster;var CallbackMaster=function(){function e(){}return e.init=function(){var t={query:"type=newUser&uid="+userDataMaster.getMyInfo.uid};platform.onShareAppMessage(t),platform.onShow(function(t){if((new Date).getTime()-e.shareTime>3e3)e.shareSuc&&e.shareSuc(),e.saveShareSuc=null,e.shareFailText="分享到不同的群才能获得奖励哦~";else{e.saveShareSuc=e.shareSuc;var r={title:"温馨提示",content:e.shareFailText,confirmText:"再试一次",success:function(t){t.confirm?e.openShare(e.saveShareSuc):e.shareFailText="分享到不同的群才能获得奖励哦~"}};platform.showModal(r)}e.shareSuc=null}),platform.onHide(function(){soundMaster.soundChannel&&soundMaster.soundChannel.stop(),e.onHideFun&&e.onHideFun();var t={gold:userDataMaster.gold,level:userDataMaster.level,life:userDataMaster.life,closeDate:(new Date).getTime()-(3e5-1e3*userDataMaster.seconds),levelStar:userDataMaster.levelStar,dayShareLife:userDataMaster.dayShareLife,tool:userDataMaster.tool,dayGift:userDataMaster.dayGift,bulletIndex:userDataMaster.bulletIndex,bulletSateArr:userDataMaster.bulletSateArr,dayFreeLife:userDataMaster.dayFreeLife},r={uid:userDataMaster.getMyInfo.uid,info:JSON.stringify(t)};ServiceMaster.post(ServiceMaster.setGameData,r,function(e){1==e.code&&e.data})})},e.openShare=function(t,r,o,i){if(void 0===t&&(t=null),void 0===r&&(r=!0),void 0===o&&(o=""),void 0===i&&(i=0),e.hasChecked){var n=e.shareInfo[0];0==i?n=e.shareInfo[Math.floor(2*Math.random())]:(n.imageUrl=e.shareInfo[2].imageUrl,n.title=(userDataMaster.myInfo.nickName||"")+e.shareInfo[2].title);var a={title:n.title,imageUrl:n.imageUrl,query:"uid="+userDataMaster.getMyInfo.uid+o};platform.shareAppMessage(a),e.shareTime=r?(new Date).getTime():0,e.shareSuc=t}},e.openHide=function(t){void 0===t&&(t=null),e.onHideFun=t},e.recommandClick=function(e,t){void 0===e&&(e=1);var r=userDataMaster.getMyInfo.uid,o={id:t.id,uid:r,appid:t.appid,type:e,module_id:t.module_id,module_ext_id:t.module_ext_id};ServiceMaster.post(ServiceMaster.gameClick,o,function(e){1==e.code&&e.data})},e.glowFilter=function(e,t,r,o){void 0===e&&(e=7159493),void 0===t&&(t=.8),void 0===r&&(r=35),void 0===o&&(o=35);var i=2,n=3,a=!1,s=!1,l=new egret.GlowFilter(e,t,r,o,i,n,a,s);return l},e.shareSuc=null,e.shareTime=0,e.onHideFun=null,e.hasChecked=!1,e.saveShareSuc=null,e.shareFailText="分享到不同的群才能获得奖励哦~",e.shareInfo=[{imageUrl:"https://lixi.h5.app81.com/minigame/game_lixi/share_img/share_1.jpg",title:"球球精灵要饿坏了，快点来喂养吧~"},{imageUrl:"https://lixi.h5.app81.com/minigame/game_lixi/share_img/share_2.jpg",title:"快来测试一下你的手速是几阶吧？听说单身10年的人手速才达到5阶"},{imageUrl:"https://lixi.h5.app81.com/minigame/game_lixi/share_img/share_3.jpg?t=1",title:"给你采集了一大袋能量果，快来领一份吧~"}],e}();__reflect(CallbackMaster.prototype,"CallbackMaster");var DeviceMaster=function(){function e(){}return e.init=function(t,r){void 0===t&&(t=750),void 0===r&&(r=1334),e.stageWidth=t,e.stageHeight=r,e.SYSTEM_INFO=platform.getSystemInfoSync(),e.model=e.SYSTEM_INFO.model,e.system=e.SYSTEM_INFO.system,e.screenWidth=e.SYSTEM_INFO.screenWidth,e.screenHeight=e.SYSTEM_INFO.screenHeight,e.scaleWidth=e.screenWidth/e.stageWidth,e.scaleHeight=e.screenHeight/e.stageHeight,e.windowWidth=2*e.SYSTEM_INFO.windowWidth,e.windowHeight=2*e.SYSTEM_INFO.windowHeight},e.getX=function(t){return void 0===t&&(t=0),t*e.scaleWidth},e.getY=function(t){return void 0===t&&(t=0),t*e.scaleHeight},e.screenWidth=750,e.screenHeight=1334,e.windowWidth=750,e.windowHeight=1334,e.stageWidth=750,e.stageHeight=1334,e.scaleWidth=1,e.scaleHeight=1,e}();__reflect(DeviceMaster.prototype,"DeviceMaster"),window.DeviceMaster=DeviceMaster;var movieMaster=function(){function e(){}return e.init=function(){var t=RES.getRes("boom_gif_json"),r=RES.getRes("boom_gif_png");e.mcFactory=new egret.MovieClipDataFactory(t,r);var o=RES.getRes("boom_gif_2_json"),i=RES.getRes("boom_gif_2_png");e.mcFactory2=new egret.MovieClipDataFactory(o,i)},e.getGif=function(t){var r;return r=-1!=e.factory2.indexOf(t)?new egret.MovieClip(e.mcFactory2.generateMovieClipData(t)):new egret.MovieClip(e.mcFactory.generateMovieClipData(t))},e.factory2=["cartridge"],e}();__reflect(movieMaster.prototype,"movieMaster"),window.movieMaster=movieMaster;var sceneMaster=function(){function e(){}return e.init=function(t){e.stage=t,e.stageHeight=t.stageHeight;var r=new eui.Rect(t.stageWidth,t.stageHeight,0);r.alpha=.7,e.modalBg=r;var o=new eui.Rect(t.stageWidth,t.stageHeight,0);o.alpha=.7,e.littleBg=o},e.changeScene=function(t){e.scene&&e.scene.parent&&e.stage.removeChild(e.scene),e.stage.addChild(t),e.scene=t,e.modal=null,e.littleModal=null},e.openModal=function(t,r){void 0===r&&(r=!0),e.modal&&(e.scene.removeChild(e.modal),e.modal=null,e.littleModal=null),e.modal=t,r?(e.scene.addChild(e.modalBg),t.scaleX=0,t.scaleY=0,e.scene.addChild(t),setTimeout(function(){t.x=375,t.y=t.height/2,1334!=t.height&&(t.y+=200),t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2,egret.Tween.get(t).to({scaleX:1,scaleY:1},500,egret.Ease.backOut)},50)):e.scene.addChild(t)},e.closeModal=function(){e.modal&&egret.Tween.get(e.modal).to({scaleX:0,scaleY:0},500,egret.Ease.backIn).call(function(){e.scene.removeChild(e.modal),e.modalBg.parent&&e.scene.removeChild(e.modalBg),e.modal=null}),e.closeLittleModal()},e.openLittleModal=function(t,r){void 0===r&&(r=!0),e.littleModal&&e.modal.removeChild(e.littleModal),r&&e.modal.addChild(e.littleBg),e.littleModal=t,t.scaleX=0,t.scaleY=0,e.scene.addChild(t),setTimeout(function(){t.x=375,t.y=t.height/2+300,t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2,egret.Tween.get(t).to({scaleX:1,scaleY:1},500,egret.Ease.backOut)},50)},e.closeLittleModal=function(){e.littleModal&&(e.scene.removeChild(e.littleModal),e.littleModal=null,e.littleBg.parent&&e.modal.removeChild(e.littleBg))},e.stageHeight=1334,e}();__reflect(sceneMaster.prototype,"sceneMaster");var ServiceMaster=function(){function e(){}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.objSort=function(e){for(var t=Object.keys(e).sort(),r={},o=0;o<t.length;o++)r[t[o]]=e[t[o]];return r},e.createToken=function(t){"undefined"!=typeof t.token&&delete t.token;var r=e.objSort(t),o="";for(var i in r)o+=o?"&":"",o+=i+"="+r[i];return o+="!@#$%^&*",(new md5).hex_md5(o)},e.request=function(e,t,r,o,i,n){void 0===t&&(t="POST"),void 0===r&&(r={}),void 0===o&&(o=null),void 0===i&&(i=null),void 0===n&&(n=null);var a=new egret.HttpRequest;a.responseType=egret.HttpResponseType.TEXT,a.open(e,egret.HttpMethod[t]),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),r.token=this.createToken(r),a.send(this.obj2str(r,!0)),a.addEventListener(egret.Event.COMPLETE,function(){o&&o(JSON.parse(a.response))},this),i&&a.addEventListener(egret.IOErrorEvent.IO_ERROR,i,this),n&&a.addEventListener(egret.ProgressEvent.PROGRESS,n,this)},e.post=function(t,r,o,i,n){void 0===r&&(r={}),void 0===o&&(o=null),void 0===i&&(i=null),void 0===n&&(n=null),e.request(e.DOMAIN+t,e.METHOD_POST,r,o,i,n)},e.get=function(t,r,o,i,n){void 0===r&&(r={}),void 0===o&&(o=null),void 0===i&&(i=null),void 0===n&&(n=null),e.request(e.DOMAIN+t,e.METHOD_GET,r,o,i,n)},e.obj2str=function(e,t){void 0===t&&(t=!1);var r="";for(var o in e)r+=!t||"encryptedData"!=o&&"iv"!=o?"&"+o+"="+e[o]:"&"+o+"="+encodeURI(e[o]).replace(/\+/g,"%2B");return r.substring(1)},e.DOMAIN="https://newbox.0e3.cn/gplants",e.METHOD_POST="POST",e.METHOD_GET="GET",e.logins="/user/logins",e.updateUser="/user/updateUser",e.getGameList="/other/getGameList",e.getConfig="/other/getConfig",e.getScore="/user/getScore",e.rank_world="/user/rank_world",e.gameClick="/other/gameClick",e.getGameData="/user/getGameData",e.setGameData="/user/setGameData",e}();__reflect(ServiceMaster.prototype,"ServiceMaster"),window.ServiceMaster=ServiceMaster;var soundMaster=function(){function e(){}return e.init=function(){RES.getResByUrl("https://lixi.h5.app81.com/minigame/game_lixi/new_music/music_guide.mp3",function(t){e.guide_tap=t});for(var t=function(t,r){RES.getResByUrl(e.songArr[t].path,function(r){e.songArr[t].sound=r})},r=0,o=e.songArr.length;o>r;r++)t(r,o)},e.playSongMusic=function(t,r){void 0===t&&(t=0),void 0===r&&(r=0),e.songArr[t].sound&&e.isMusic&&(0==r?(e.musicStart=egret.getTimer(),e.soundChannel=e.songArr[t].sound.play(0,-1)):e.soundChannel=e.songArr[t].sound.play(e.pauseTime,-1))},e.stopSongMusic=function(t){void 0===t&&(t=!1),e.soundChannel&&(t?e.pauseTime=(egret.getTimer()-e.musicStart)/1e3:e.pauseTime=0,e.soundChannel.stop(),e.soundChannel=null)},e.playSingleMusic=function(t){e[t]&&e.isMusic&&e[t].play(0,1)},Object.defineProperty(e,"isMusic",{get:function(){return e.music},set:function(t){t?e.music=!0:e.music=!1},enumerable:!0,configurable:!0}),e.songArr=[{path:"https://lixi.h5.app81.com/minigame/game_lixi/new_music/music_0.mp3",sound:null},{path:"https://lixi.h5.app81.com/minigame/game_lixi/new_music/music_1.mp3",sound:null},{path:"https://lixi.h5.app81.com/minigame/game_lixi/new_music/music_2.mp3",sound:null},{path:"https://lixi.h5.app81.com/minigame/game_lixi/new_music/music_3.mp3",sound:null},{path:"https://lixi.h5.app81.com/minigame/game_lixi/new_music/music_4.mp3",sound:null},{path:"https://lixi.h5.app81.com/minigame/game_lixi/new_music/music_5.mp3",sound:null},{path:"https://lixi.h5.app81.com/minigame/game_lixi/new_music/music_6.mp3",sound:null},{path:"https://lixi.h5.app81.com/minigame/game_lixi/new_music/music_7.mp3",sound:null},{path:"https://lixi.h5.app81.com/minigame/game_lixi/new_music/music_8.mp3",sound:null},{path:"https://lixi.h5.app81.com/minigame/game_lixi/new_music/music_9.mp3",sound:null},{path:"https://lixi.h5.app81.com/minigame/game_lixi/new_music/music_10.mp3",sound:null}],e.music=!0,e.musicStart=0,e.pauseTime=0,e}();__reflect(soundMaster.prototype,"soundMaster");var userDataMaster=function(){function e(){}return e.getInstance=function(){return e.shared||(e.shared=new e),e.shared},e.init=function(){var t=[e.gold,e.life,e.level,e.bulletIndex,e.tool];e.myCollection=new eui.ArrayCollection(t),e.login(),e.getRecommand(),e.createLevelArr()},e.createLevelArr=function(){for(var t=[],r=[5,8,11,14,15],o=1;100>=o;o++){var i=5>o?o:5,n=o>r.length?o+10:r[o-1],a=n-i+1,s=Math.ceil(7*a/2),l={level:o,amount:s,existAmount:0,score:20};t.push(l)}e.levelArr=t},e.getGameData=function(t){0!=t?ServiceMaster.post(ServiceMaster.getGameData,{uid:t},function(t){if(1==t.code&&t.data){var r=t.data;if(r.info.length>0){var o=JSON.parse(r.info);if(o.gold&&(e.gold=o.gold),o.life&&(e.life=o.life),o.level&&(e.level=o.level),o.closeDate&&(e.closeDate=o.closeDate,o.life<5)){var i=o.closeDate,n=((new Date).getTime()-i)/1e3/5/60,a=e.life+Math.floor(n);if(a>=5)e.myLife=a;else{e.life=a,e.myCollection.replaceItemAt(a,1);var s=n/1e3-5*Math.floor(n)*60;e.updateTime(s)}}o.levelStar&&(e.levelStar=o.levelStar),o.dayShareLife&&(e.dayShareLife=o.dayShareLife,e.todayShareLife),o.dayGift&&(e.dayGift=o.dayGift),o.tool&&(e.tool=o.tool),o.bulletSateArr&&(e.bulletSateArr=o.bulletSateArr),o.bulletIndex&&(e.bulletIndex=o.bulletIndex),o.dayFreeLife&&(e.dayFreeLife=o.dayFreeLife)
}}}):e.requestTimes<5&&setTimeout(function(){e.login()},2e3)},e.getRecommand=function(){ServiceMaster.post(ServiceMaster.getGameList,{},function(t){1==t.code&&t.data&&(e.recommand=t.data)})},Object.defineProperty(e,"myGold",{set:function(t){e.gold=t,e.myCollection.replaceItemAt(t,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"myLife",{set:function(t){e.life=t>5?5:t,e.myCollection.replaceItemAt(t,1),5>t&&!e.terval&&(e.seconds=300,e.updateTime()),console.log("lifechange",t,e.life)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"myLevel",{set:function(t){e.level=t,e.myCollection.replaceItemAt(t,2)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"myBulleIndex",{set:function(t){e.bulletIndex=t,e.myCollection.replaceItemAt(t,3)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"myTool",{set:function(t){e.tool=t,e.myCollection.replaceItemAt(t,4)},enumerable:!0,configurable:!0}),e.updateTime=function(t){void 0===t&&(t=300),console.log("t",t),clearInterval(e.terval),e.terval=setInterval(function(){t--,e.seconds=t,0>=t&&(console.log("t=0",t),clearInterval(e.terval),e.terval=null,e.myLife=e.life+1)},1e3)},Object.defineProperty(e,"getMyInfo",{get:function(){return e.myInfo},set:function(t){e.myInfo=t},enumerable:!0,configurable:!0}),Object.defineProperty(e,"todayShareLife",{get:function(){if(e.dayShareLife.day==e.getToday()){if(e.dayShareLife.num>=5)return!1}else e.dayShareLife={day:e.getToday(),num:0};return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e,"todayGift",{get:function(){if(e.dayGift.day==e.getToday()){if(e.dayGift.num>=2)return!1}else e.dayGift={day:e.getToday(),num:0};return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e,"todayFreeLife",{get:function(){if(e.dayFreeLife.day==e.getToday()){if(e.dayFreeLife.num>=8)return!1}else e.dayFreeLife={day:e.getToday(),num:0};return!0},enumerable:!0,configurable:!0}),e.createLoginBtn=function(t,r,o,i){return __awaiter(this,void 0,void 0,function(){var n,a,s;return __generator(this,function(l){switch(l.label){case 0:return n=this,a=DeviceMaster.screenWidth/750,t*=a,r*=a,o*=a,i*=a,s=e,[4,platform.createUserInfoButton({type:"image",image:"../../resource/assets/imgData/img_yxbj.png",style:{left:t,top:r,width:o,height:i,lineHeight:40,backgroundColor:"#ff0000",color:"#ffffff",textAlign:"center",fontSize:16,borderRadius:4}})];case 1:return s.userInfoBtn=l.sent(),e.userInfoBtn.onTap(function(t){e.updateUser(t)}),[2]}})})},e.updateUser=function(t){return void 0===t&&(t=null),__awaiter(this,void 0,void 0,function(){var r,o;return __generator(this,function(i){return r=t.userInfo,e.myInfo.nickName=r.nickName,e.myInfo.avatarUrl=r.avatarUrl,o={uid:e.getMyInfo.uid,nickName:r.nickName,gender:r.gender,avatarUrl:r.avatarUrl},ServiceMaster.post(ServiceMaster.updateUser,o,function(t){1===parseInt(t.code)&&t.data&&(e.userInfoBtn&&e.userInfoBtn.destroy(),e.loginCallback&&e.loginCallback(),e.loginCallback=null)}),[2]})})},e.login=function(){return __awaiter(this,void 0,void 0,function(){var t,r;return __generator(this,function(o){switch(o.label){case 0:return[4,platform.login()];case 1:return t=o.sent(),r={code:t.code},e.shareUid>0&&(r.pid=e.shareUid),e.requestTimes++,ServiceMaster.post(ServiceMaster.logins,r,function(t){1===parseInt(t.code)&&t.data&&(e.getMyInfo=t.data,platform.openDataContext.postMessage({type:"openid",openid:t.data.openId}),e.getGameData(t.data.uid))}),[2]}})})},e.getToday=function(){var e=new Date,t=e.getMonth()+1>9?e.getMonth()+1+"":"0"+(e.getMonth()+1),r=e.getDate()>9?e.getDate()+"":"0"+e.getDate();return e.getFullYear()+"-"+t+"-"+r},e.myInfo={uid:0,openId:"",is_new_user:!0,nickName:"",avatarUrl:""},e.gold=500,e.life=5,e.level=1,e.closeDate=0,e.seconds=0,e.terval=null,e.levelStar=[],e.bulletIndex=0,e.tool={bullet:{level:1,unlock:!0,num:0},glass:{level:1,unlock:!0,num:0},hammer:{level:2,unlock:!1,num:0},hat:{level:10,unlock:!1,num:0},lamp:{level:15,unlock:!1,num:0}},e.bulletArr=[{id:0,img:"img_bullet_a2",title:"刺刺炮",price:1e3,powerImg:1,txt:"",target:{}},{id:1,img:"img_bullet_b3",title:"蘑菇炮",price:500,powerImg:3,txt:"对炸弹方块威力+2",target:{type_5:2}},{id:2,img:"img_bullet_c3",title:"大头炮",price:1e3,powerImg:3,txt:"对移动方块威力+2",target:{type_6:2}},{id:3,img:"img_bullet_d3",title:"小南瓜",price:5e3,powerImg:2,txt:"对普通方块威力+1",target:{type_1:1,type_2:1}},{id:4,img:"img_bullet_e3",title:"包菜君",price:5e3,powerImg:2,txt:"对所有方块威力+1",target:{type_1:1,type_2:1,type_5:1,type_6:1}}],e.bulletSateArr=[1,0,0,0,0],e.levelArr=[],e.shareUid=0,e.requestTimes=0,e.dayShareLife={day:"",num:0},e.dayGift={day:"",num:0},e.dayFreeLife={day:"",num:0},e.loginCallback=null,e}();__reflect(userDataMaster.prototype,"userDataMaster"),window.userDataMaster=userDataMaster;var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){},t.prototype.onProgress=function(e,t){},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var getSuccess=function(e){function t(t,r){var o=e.call(this)||this;return o.imgName="img_diamond_big_png",o.shareType=1,o.imgName=t,o.title=r,o}return __extends(t,e),t.prototype.partAdded=function(t,r){e.prototype.partAdded.call(this,t,r)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.knowBtn?this.init():this.addEventListener(egret.Event.COMPLETE,this.init,this)},t.prototype.init=function(){this.img.texture=RES.getRes(this.imgName),this.txt.text=""+this.title,egret.Tween.get(this.light,{loop:!0}).to({rotation:360},5e3),this.knowBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.knowFun,this),this.ifShare.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ifShareFun,this)},t.prototype.knowFun=function(){egret.Tween.removeTweens(this.light),1==this.shareType&&CallbackMaster.openShare(null,!1),sceneMaster.littleModal?sceneMaster.closeLittleModal():sceneMaster.closeModal()},t.prototype.ifShareFun=function(){this.shareType=1==this.shareType?2:1,this.shareImg.texture=RES.getRes("img_check_0"+this.shareType+"_png")},t}(eui.Component);__reflect(getSuccess.prototype,"getSuccess",["eui.UIComponent","egret.DisplayObject"]);var giftModal=function(e){function t(){var t=e.call(this)||this;return t.terval=null,t.current=0,t.speed=1e3,t.choosing=!1,t.canTap=!0,t.dataArr=[{id:0,name:"img_gift_05_png",num:1,type:"bullet"},{id:1,name:"img_gift_02_png",num:30,type:"gold"},{id:2,name:"img_gift_05_png",num:1,type:"bullet"},{id:3,name:"img_gift_04_png",num:1,type:"glass"},{id:4,name:"img_gift_01_png",num:2,type:"life"},{id:5,name:"img_gift_02_png",num:20,type:"gold"},{id:6,name:"img_gift_01_png",num:1,type:"life"},{id:7,name:"img_gift_03_png",num:10,type:"gold"}],t}return __extends(t,e),t.prototype.partAdded=function(t,r){e.prototype.partAdded.call(this,t,r)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},t.prototype.init=function(){var e=this;userDataMaster.todayGift?(e.getBtn.texture=RES.getRes("btn_lottery_0"+(userDataMaster.dayGift.num+1)+"_png"),e.getBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,e.getFun,this)):e.getBtn.texture=RES.getRes("btn_lottery_03_png"),e.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,e.closeFun,this),e.terval=setInterval(function(){e.timer(e)},1e3)},t.prototype.timer=function(e){if(e["bg_"+e.current].texture=RES.getRes("img_bg_lottery_01_png"),e.current=e.current<7?e.current+1:0,e["bg_"+e.current].texture=RES.getRes("img_bg_lottery_02_png"),!e.canTap&&e.speed>=1e3){e.choosing=!1;var t=Math.floor(8*Math.random()*1e3)+5;setTimeout(function(){if(!e.canTap){clearInterval(e.terval);var t=e.dataArr[e.current];switch(t.type){case"glass":case"bullet":var r=userDataMaster.tool;r[t.type].num+=t.num,userDataMaster.myTool=r;break;case"gold":var o=userDataMaster.gold;o+=t.num,userDataMaster.myGold=o;break;case"life":var i=userDataMaster.life;i+=t.num,userDataMaster.myLife=i}0==userDataMaster.dayGift.num?userDataMaster.dayGift.num++:"",e.getBtn.texture=RES.getRes("btn_lottery_0"+(userDataMaster.dayGift.num+1)+"_png"),sceneMaster.openLittleModal(new getSuccess(t.name,"X"+t.num)),e.canTap=!0}},t)}e.choosing&&(e.speed+=100,clearInterval(e.terval),e.terval=setInterval(function(){e.timer(e)},e.speed))},t.prototype.getFun=function(){function e(){t.canTap=!1,t.speed=50,clearInterval(t.terval),t.terval=setInterval(function(){t.timer(t)},t.speed),setTimeout(function(){t.choosing=!0},3e3)}var t=this;t.canTap&&userDataMaster.todayGift&&(egret.Tween.removeTweens(t.getBtn),egret.Tween.get(t.getBtn).to({scaleX:.8,scaleY:.8},60).to({scaleX:1,scaleY:1},60),0==userDataMaster.dayGift.num?e():1==userDataMaster.dayGift.num&&AdMaster.useVideo(function(){e()},function(){CallbackMaster.openShare(function(){e()})}))},t.prototype.closeFun=function(){sceneMaster.closeModal()},t}(eui.Component);__reflect(giftModal.prototype,"giftModal",["eui.UIComponent","egret.DisplayObject"]);var levelItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.partAdded=function(t,r){e.prototype.partAdded.call(this,t,r)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},t.prototype.init=function(){this.bodyGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.jumpFun,this)},t.prototype.jumpFun=function(){egret.Tween.removeAllTweens(),sceneMaster.openModal(new playBefore(this.data.level))},t.prototype.dataChanged=function(){var e=(this.data.level+1)%t.point.length+1;if(this.map.texture=RES.getRes("img_map_0"+e+"_png"),this.bodyGroup.x=t.point[e-1].x,this.bodyGroup.y=t.point[e-1].y,this.levelText.text=this.data.level+"",this.data.level<=userDataMaster.levelStar.length){this.bgImg.texture=RES.getRes("img_wood_01_png");for(var r=1;r<=userDataMaster.levelStar[this.data.level-1];r++)this["star_"+r].texture=RES.getRes("img_star_b1_png")}else this.data.level==userDataMaster.levelStar.length+1?this.bgImg.texture=RES.getRes("img_wood_01_png"):(this.removeChild(this.star_1),this.removeChild(this.star_2),this.removeChild(this.star_3),this.bodyGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.jumpFun,this));this.cacheAsBitmap=!0},t.point=[{x:230,y:-30},{x:142,y:0},{x:262,y:-6},{x:422,y:-40},{x:480,y:0},{x:255,y:-30},{x:120,y:-30},{x:260,y:0},{x:390,y:-26}],t}(eui.ItemRenderer);__reflect(levelItem.prototype,"levelItem",["eui.UIComponent","egret.DisplayObject"]),window.levelItem=levelItem;var levelUpModal=function(e){function t(t,r){var o=e.call(this)||this;return o.level=t,o.info=r,o}return __extends(t,e),t.prototype.partAdded=function(t,r){e.prototype.partAdded.call(this,t,r)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.videoBtn?this.init():this.addEventListener(egret.Event.COMPLETE,this.init,this)},t.prototype.init=function(){this.scoreText.text=this.info.score+"",this.levelText.text="第"+this.level+"关",this.goldText.text="X"+this.info.gold,this.level>userDataMaster.levelStar.length?(userDataMaster.levelStar.push(this.info.star),userDataMaster.myLevel=this.level):this.info.star>userDataMaster.levelStar[this.level-1]&&(userDataMaster.levelStar[this.level-1]=this.info.star);for(var e=this,t=function(t){setTimeout(function(){e["star_"+t].texture=RES.getRes("img_star_a1_png")},1e3*t)},r=1;r<=this.info.star;r++)t(r);var o={uid:userDataMaster.myInfo.uid,level:e.level,score:e.info.score,star:e.info.star};ServiceMaster.post(ServiceMaster.getScore,o,function(e){1===parseInt(e.code)&&e.data}),this.videoBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.videoFun,this),this.getBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.getFun,this)},t.prototype.videoFun=function(){function e(){userDataMaster.myGold=userDataMaster.gold+2*t.info.gold,sceneMaster.changeScene(new startScene),sceneMaster.openModal(new getSuccess("img_diamond_big_png","X"+2*t.info.gold))}AdMaster.useVideo(function(){e()},function(){CallbackMaster.openShare(function(){e()})});var t=this},t.prototype.getFun=function(){userDataMaster.myGold=userDataMaster.gold+this.info.gold,sceneMaster.changeScene(new startScene),sceneMaster.openModal(new getSuccess("img_diamond_big_png","X"+this.info.gold))},t}(eui.Component);__reflect(levelUpModal.prototype,"levelUpModal",["eui.UIComponent","egret.DisplayObject"]);var moreComponent=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.getInstance=function(){return t.shared||(t.shared=new t),t.shared},t.prototype.partAdded=function(t,r){e.prototype.partAdded.call(this,t,r)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},t.prototype.init=function(){var e=userDataMaster.recommand[1].games;this.sourceArr=new eui.ArrayCollection(e),this.dataGroup=new eui.DataGroup,this.dataGroup.dataProvider=this.sourceArr,this.dataGroup.percentWidth=400,this.dataGroup.percentHeight=170*this.sourceArr.length,this.content.height=170*this.sourceArr.length,this.dataGroup.useVirtualLayout=!0;var t=new eui.TileLayout;t.horizontalGap=30,t.verticalGap=40,this.dataGroup.layout=t,this.content.addChild(this.dataGroup),this.dataGroup.itemRenderer=moreItem,this.changeArea.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changePosition,this),this.tipImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changePosition,this)},t.prototype.changePosition=function(){var e=this;1==this.tipImg.visible&&(this.tipImg.visible=!1),-465==this.container.x?egret.Tween.get(this.container).to({x:0},500).call(function(){e.changeArea.texture=RES.getRes("btn_more_game_turn_png")}):egret.Tween.get(this.container).to({x:-465},500).call(function(){e.changeArea.texture=RES.getRes("btn_more_game_png")})},t}(eui.Component);__reflect(moreComponent.prototype,"moreComponent",["eui.UIComponent","egret.DisplayObject"]),window.moreComponent=moreComponent;var moreItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.partAdded=function(t,r){e.prototype.partAdded.call(this,t,r)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},t.prototype.init=function(){var e=this;this.image.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){CallbackMaster.recommandClick(1,e.data);var t=2;platform.navigateToMiniProgram({appId:e.data.appid,path:e.data.path,extraData:{},success:function(e){},fail:function(e){t=3},complete:function(){CallbackMaster.recommandClick(t,e.data)}})},this)},t.prototype.dataChanged=function(){this.title.text=this.data.name,this.image.source=this.data.image||""},t}(eui.ItemRenderer);__reflect(moreItem.prototype,"moreItem",["eui.UIComponent","egret.DisplayObject"]),window.moreItem=moreItem;var myShop=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.partAdded=function(t,r){e.prototype.partAdded.call(this,t,r)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.goldGroup?this.init():this.addEventListener(egret.Event.COMPLETE,this.init,this)},t.prototype.init=function(){var e=this;e.goldNum.text=userDataMaster.gold+"",e.scroller.height=e.stage.stageHeight-150,e.sourceArr=new eui.ArrayCollection(userDataMaster.bulletArr),e.dataGroup=new eui.DataGroup,e.dataGroup.dataProvider=e.sourceArr,e.dataGroup.useVirtualLayout=!0;var t=new eui.VerticalLayout;t.gap=-20,e.dataGroup.layout=t,e.dataGroup.itemRenderer=shopItem,e.contentGroup.height=293*userDataMaster.bulletArr.length,e.contentGroup.addChild(e.dataGroup),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeFun,this),this.goldGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goldGroupFun,this),userDataMaster.myCollection.addEventListener(eui.CollectionEvent.COLLECTION_CHANGE,this.collectionChangeHandler,this)},t.prototype.collectionChangeHandler=function(e){var t=this;userDataMaster.bulletArr[userDataMaster.bulletIndex];t.goldNum.text=userDataMaster.gold+"",t.sourceArr.refresh()},t.prototype.closeFun=function(){sceneMaster.closeModal()},t.prototype.goldGroupFun=function(){},t}(eui.Component);__reflect(myShop.prototype,"myShop",["eui.UIComponent","egret.DisplayObject"]);var playBefore=function(e){function t(t){var r=e.call(this)||this;return r.choose={glass:!1,bullet:!1},r.level=t,r}return __extends(t,e),t.prototype.partAdded=function(t,r){e.prototype.partAdded.call(this,t,r)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.startBtn?this.init():this.addEventListener(egret.Event.COMPLETE,this.init,this)},t.prototype.init=function(){var e=this;userDataMaster.tool.glass.num<=0&&(e.glassNum.visible=!1,e.glassAdd.visible=!0),userDataMaster.tool.bullet.num<=0&&(e.bulletNum.visible=!1,e.bulletAdd.visible=!0),userDataMaster.dayFreeLife.num>=3&&(e.videoBtn.texture=RES.getRes("btn_before_02_png")),e.titleText.text="第"+this.level+"关",e.startBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,e.startFun,this),e.videoBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,e.videoFun,this),e.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,e.closeFun,this),e.glass.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.chooseFun("glass")},this),e.bullet.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.chooseFun("bullet")},this)},t.prototype.chooseFun=function(e){function t(){var t=userDataMaster.tool;t[e].num++,userDataMaster.myTool=t,r[e+"Add"].visible=!1,r[e+"Num"].visible=!0,r[e+"Num"].text="X"+t[e].num}var r=this;return!r.choose[e]&&userDataMaster.tool[e].num<=0?void AdMaster.useVideo(function(){t()},function(){CallbackMaster.openShare(function(){t()})}):(r.choose[e]=!r.choose[e],r[e+"Choose"].visible=r.choose[e],r[e+"Light"].visible=r.choose[e],r[e+"Num"].visible=!r.choose[e],void 0)},t.prototype.startFun=function(e){if(void 0===e&&(e=!0),e){if(userDataMaster.life<=0)return void console.log("体力不足");userDataMaster.myLife=userDataMaster.life-1}for(var t in this.choose)this.choose[t]&&userDataMaster.tool[t].num--;sceneMaster.changeScene(new runningScene(this.level,{},this.choose))},t.prototype.videoFun=function(){var e=this;userDataMaster.dayFreeLife||platform.showModal({title:"温馨提醒",content:"今日免体力次数已用完，请明日再来"}),userDataMaster.dayFreeLife.num<3?CallbackMaster.openShare(function(){e.startFun(!1)}):AdMaster.useVideo(function(){e.startFun(!1)},function(){CallbackMaster.openShare(function(){e.startFun(!1)})})},t.prototype.closeFun=function(){sceneMaster.littleModal?sceneMaster.closeLittleModal():sceneMaster.closeModal()},t}(eui.Component);__reflect(playBefore.prototype,"playBefore",["eui.UIComponent","egret.DisplayObject"]);var rankItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.partAdded=function(t,r){e.prototype.partAdded.call(this,t,r)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},t.prototype.init=function(){},t.prototype.dataChanged=function(){this.data.rank.length>4&&(this.data.rank=this.data.rank.slice(0,4)+"…"),this.index.text=this.data.rank+"",this.headimg.source=this.data.avatarUrl,this.level.text="关卡"+this.data.level,this.score.text=this.data.score,this.data.nickName.length>5&&(this.data.nickName=this.data.nickName.slice(0,5)+"…"),this.nickName.text=this.data.nickName,this.headimg.mask=this.headimgMask,this.data.rank<4?(this.bestHat.visible=!0,this.bestHat.texture=RES.getRes("icn_medal_0"+this.data.rank+"_png")):this.bestHat.visible=!1;for(var e=1;e<=this.data.star;e++)this["star_"+e].texture=RES.getRes("img_star_b1_png")},t}(eui.ItemRenderer);__reflect(rankItem.prototype,"rankItem",["eui.UIComponent","egret.DisplayObject"]);var rankModal=function(e){function t(){var t=e.call(this)||this;return t.dataGroup=new eui.DataGroup,t.sourceArr=new eui.ArrayCollection([]),t.currentType="friend",t.worldPage=1,t.endPage=1,t.pageSize=6,t}return __extends(t,e),t.prototype.partAdded=function(t,r){e.prototype.partAdded.call(this,t,r)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.bgImg?this.init():this.addEventListener(egret.Event.COMPLETE,this.init,this)},t.prototype.init=function(){var e=this;platform.openDataContext.postMessage({type:"rank",width:588,height:740});var t=platform.openDataContext.createDisplayObject();this.friendGroup.addChild(t),this.dataGroup.dataProvider=this.sourceArr,this.dataGroup.itemRenderer=rankItem;var r=new eui.VerticalLayout;r.gap=5,this.dataGroup.layout=r,this.worldGroup.addChild(this.dataGroup),this.getWorld(),this.lastPage.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.changePage("-1")},this),this.nextPage.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.changePage("+1")},this),this.goHome.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goHomeFun,this),this.friend.addEventListener(egret.TouchEvent.TOUCH_TAP,this.friendFun,this),this.world.addEventListener(egret.TouchEvent.TOUCH_TAP,this.worldFun,this)},t.prototype.changePage=function(e){"friend"==this.currentType?this.getMore(e):("-1"==e?this.worldPage>1?this.worldPage--:1:this.worldPage<this.endPage?this.worldPage++:"",this.getWorld())},t.prototype.getWorld=function(){var e=this,t=this,r={uid:userDataMaster.getMyInfo.uid,page:t.worldPage,size:t.pageSize};ServiceMaster.post(ServiceMaster.rank_world,r,function(r){if(1==r.code&&r.data){var o=r.data.rank_world;t.myRank.text="您当前为：第"+r.data.rank_user.rank+"名",t.endPage=r.data.page_num,t.sourceArr.removeAll(),e.pageText.text=t.worldPage+" / "+t.endPage;for(var i=0;i<o.length;i++)t.sourceArr.addItem(o[i])}})},t.prototype.friendFun=function(){this.pageText.visible=!1,this.myRank.visible=!1,this.friend.texture=RES.getRes("btn_tittle_a1_png"),this.world.texture=RES.getRes("btn_tittle_b2_png"),this.friendGroup.visible=!0,this.worldGroup.visible=!1,this.currentType="friend"},t.prototype.worldFun=function(){this.pageText.visible=!0,this.myRank.visible=!0,this.friend.texture=RES.getRes("btn_tittle_a2_png"),this.world.texture=RES.getRes("btn_tittle_b1_png"),this.friendGroup.visible=!1,this.worldGroup.visible=!0,this.currentType="world"},t.prototype.getMore=function(e){platform.openDataContext.postMessage({type:"rank",page:e,width:588,height:740})},t.prototype.goHomeFun=function(){sceneMaster.closeModal()},t}(eui.Component);__reflect(rankModal.prototype,"rankModal",["eui.UIComponent","egret.DisplayObject"]);var rebornModal=function(e){function t(t,r){var o=e.call(this)||this;return o.level=t,o.myData=r,o}return __extends(t,e),t.prototype.partAdded=function(t,r){e.prototype.partAdded.call(this,t,r)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.ignoreBtn?this.init():this.addEventListener(egret.Event.COMPLETE,this.init,this)},t.prototype.init=function(){var e=this;e.ignoreBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ignoreFun,this);var t=5,r=setInterval(function(){t>0?(t--,e.num.texture=RES.getRes("img_countdown_0"+t+"_png")):(e.ignoreBtn.visible=!0,clearInterval(r))},1e3)},t.prototype.ignoreFun=function(){sceneMaster.openModal(new gameOver(this.level,this.myData))},t}(eui.Component);__reflect(rebornModal.prototype,"rebornModal",["eui.UIComponent","egret.DisplayObject"]);var shopItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.partAdded=function(t,r){e.prototype.partAdded.call(this,t,r)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.dataChanged=function(){if(this.img.texture=RES.getRes(this.data.img+"_png"),this.power.texture=RES.getRes("img_power_0"+this.data.powerImg+"_png"),this.txt.text=this.data.txt,0==this.data.id?this.bgImg.texture=RES.getRes("img_bg_bullet_01_png"):this.bgImg.texture=RES.getRes("img_bg_bullet_02_png"),0==userDataMaster.bulletSateArr[this.data.id]&&userDataMaster.gold<this.data.price)this.btn.texture=RES.getRes("btn_insufficient_png");else{var e=0==userDataMaster.bulletSateArr[this.data.id]?"btn_buy":"btn_use";this.btn.texture=RES.getRes(e+"_png")}this.data.id==userDataMaster.bulletIndex&&(this.btn.texture=RES.getRes("img_using_png")),this.title.text=this.data.title,this.price.text="x"+this.data.price,this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.getFun,this)},t.prototype.getFun=function(){if(0==userDataMaster.bulletSateArr[this.data.id])if(userDataMaster.gold>=this.data.price){userDataMaster.bulletSateArr[this.data.id]=1,userDataMaster.myGold=userDataMaster.gold-this.data.price;var e=userDataMaster.bulletArr[this.data.id];sceneMaster.openLittleModal(new getSuccess(e.img+"_png",e.title))}else{console.log("金币不足");var t=new eui.Label("金币不足");t.size=30,t.textColor=16777215,t.x=(750-t.width)/2,t.y=500,this.parent.addChild(t),egret.Tween.get(t).to({y:100},1e3).to({alpha:0},500).call(function(){t.parent&&t.parent.removeChild(t)})}else 1==userDataMaster.bulletSateArr[this.data.id]&&(userDataMaster.myBulleIndex=this.data.id,console.log("使用这个"))},t}(eui.ItemRenderer);__reflect(shopItem.prototype,"shopItem",["eui.UIComponent","egret.DisplayObject"]);var teachModal=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.partAdded=function(t,r){e.prototype.partAdded.call(this,t,r)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.bgImg?this.init():this.addEventListener(egret.Event.COMPLETE,this.init,this)},t.prototype.init=function(){this.bgImg.height=this.stage.stageHeight,this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeFun,this)},t.prototype.closeFun=function(){sceneMaster.closeModal()},t}(eui.Component);__reflect(teachModal.prototype,"teachModal",["eui.UIComponent","egret.DisplayObject"]);var cloudCom=function(e){function t(t){var r=e.call(this)||this;return r.title=t,r}return __extends(t,e),t.prototype.partAdded=function(t,r){e.prototype.partAdded.call(this,t,r)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},t.prototype.init=function(){this.img_1.texture=RES.getRes(this.title+"_left_png"),this.img_2.texture=RES.getRes(this.title+"_right_png"),egret.Tween.get(this.img_1,{loop:!0}).to({x:-750},1e4).to({x:750},0).to({x:0},1e4),egret.Tween.get(this.img_2,{loop:!0}).to({x:0},1e4).to({x:-750},1e4).to({x:750},0)},t}(eui.Component);__reflect(cloudCom.prototype,"cloudCom",["eui.UIComponent","egret.DisplayObject"]);var gameOver=function(e){function t(t,r){var o=e.call(this)||this;return o.level=t,o.myData=r,o}return __extends(t,e),t.prototype.partAdded=function(t,r){e.prototype.partAdded.call(this,t,r)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.homeBtn?this.init():this.addEventListener(egret.Event.COMPLETE,this.init,this)},t.prototype.init=function(){var e=this,t=new eui.DataGroup,r=userDataMaster.recommand[1].games.slice(0,4),o=new eui.ArrayCollection(r);t.dataProvider=o;var i=new eui.HorizontalLayout;i.gap=-5,t.layout=i,t.itemRenderer=moreItem,e.moreGroup.addChild(t);var n={uid:userDataMaster.myInfo.uid,level:this.level,score:e.myData.score,star:e.myData.star};ServiceMaster.post(ServiceMaster.getScore,n,function(e){1===parseInt(e.code)&&e.data}),this.levelText.text="第"+this.level+"关",this.levelProccess.text=this.myData.amount+"/"+userDataMaster.levelArr[this.level-1].amount,this.shareBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.shareFun,this),this.homeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.homeFun,this),this.playBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.playFun,this)},t.prototype.shareFun=function(){CallbackMaster.openShare(null,!1)},t.prototype.homeFun=function(){sceneMaster.changeScene(new startScene)},t.prototype.playFun=function(){var e=this.level;sceneMaster.openLittleModal(new playBefore(e))},t}(eui.Component);__reflect(gameOver.prototype,"gameOver",["eui.UIComponent","egret.DisplayObject"]);var levelCom=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.partAdded=function(t,r){e.prototype.partAdded.call(this,t,r)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},t.prototype.init=function(){var e=this;e.sourceArr=new eui.ArrayCollection(userDataMaster.levelArr),e.dataGroup=new eui.DataGroup,e.dataGroup.dataProvider=e.sourceArr,e.dataGroup.useVirtualLayout=!0;var t=new eui.VerticalLayout;t.gap=0,e.dataGroup.layout=t,e.dataGroup.itemRenderer=levelItem,e.dataGroup.y=424,e.content.height=e.dataGroup.y+130*userDataMaster.levelArr.length+300,e.content.addChildAt(e.dataGroup,3),userDataMaster.levelStar.length>1&&(this.scroller.viewport.scrollV=130*(userDataMaster.levelStar.length-1)),setTimeout(function(){var t=(userDataMaster.level+1+1)%levelItem.point.length+1;e.head.x=levelItem.point[t-1].x,e.head.y=e.dataGroup.y-e.head.height+levelItem.point[t-1].y+130*userDataMaster.level,e.headimg.source=userDataMaster.myInfo.avatarUrl,e.headimg.mask=e.headmask},300)},t}(eui.Component);__reflect(levelCom.prototype,"levelCom",["eui.UIComponent","egret.DisplayObject"]);var runningScene=function(e){function t(t,r,o){void 0===r&&(r={}),void 0===o&&(o={glass:!1,bullet:!1});var i=e.call(this)||this;return i.arcPro=new egret.Shape,i.factor=50,i.currentTimer=egret.getTimer(),i.ceilArr=[],i.adaptParams={gridAreaTop:204,gridAreaLeft:39,itemWidth:96},i.worldSpeed=1e3,i.ballSpeed=800,i.gridArr=[],i.beeArr=[],i.shooting=!1,i.myData={beeNum:5,amount:0,score:0,reborn:0,gold:0,star:0,line:0},i.tooling=null,i.chooseTool={glass:!1,bullet:!1},i.shootPoint={bx:375,by:1034,ex:0,ey:0,floor:!1,beeNum:0,speedy:3},i.prepare=!1,console.log(t),i.levelInfo=userDataMaster.levelArr[t-1],r&&r.beeNum&&(i.myData=r),i.chooseTool=o,i}return __extends(t,e),t.prototype.partAdded=function(t,r){e.prototype.partAdded.call(this,t,r)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.bgImg?this.init():this.addEventListener(egret.Event.COMPLETE,this.init,this)},t.prototype.init=function(){var e=this;this.levelText.text=this.levelInfo.level+"",this.bulletImg.texture=RES.getRes(userDataMaster.bulletArr[userDataMaster.bulletIndex].img+"_png"),this.bulletNum.text="X"+this.myData.beeNum,this.amountText.text=this.myData.amount+"/"+this.levelInfo.amount,this.bgImg.height=this.stage.stageHeight,this.world=new p2.World,this.world.sleepMode=p2.World.BODY_SLEEPING,this.world.gravity=[0,-10],this.world.defaultContactMaterial.restitution=1,e.createCeil();for(var t=3;t>0;t--)e.createGrids(t);for(var t=1;t<=e.myData.star;t++)e["star_"+t].texture=RES.getRes("img_star_b1_png");e.scoreProccess.addChildAt(e.arcPro,2),e.scoreText.text=e.myData.score+"",e.changeGraphics(),e.toolState(),e.initBee(),e.world.on("beginContact",this.onBeginContact,this),this.addEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this);var r=100;e.chooseTool.bullet&&(setTimeout(function(){var t=movieMaster.getGif("cartridge");t.anchorOffsetX=205,t.anchorOffsetY=185,t.x=375,t.y=400,e.addChild(t),t.gotoAndPlay(1,1),t.addEventListener(egret.Event.COMPLETE,function(r){console.log(662222);for(var o=function(r,o){setTimeout(function(){var i=new beeCom;i.createBody(e,7.5,e.getPosition(600)),i.boxBody.velocity[1]=-20,e.beeArr.push(i),e.shootPoint.beeNum++,e.myData.beeNum++,e.bulletNum.text="X"+e.myData.beeNum,console.log(6436),r==o-1&&egret.Tween.get(t).to({scaleX:0,scaleY:0},1e3).call(function(){t.parent&&t.parent.removeChild(t)})},100*r)},i=0,n=5;n>i;i++)o(i,n)},this)},r),r+=3e3),e.chooseTool.glass&&(setTimeout(function(){},r),r+=2e3),setTimeout(function(){e.prepare=!0,e.updateBee(),console.log(78777),e.rayGroup.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.touchBeginFun,e),e.rayGroup.addEventListener(egret.TouchEvent.TOUCH_MOVE,e.touchMoveFun,e),e.rayGroup.addEventListener(egret.TouchEvent.TOUCH_END,e.touchEndFun,e)},r),platform.onShow(function(){e.currentTimer=egret.getTimer()})},t.prototype.initBee=function(){for(var e=this,t=0,r=e.myData.beeNum;r>t;t++){var o=new beeCom;o.createBody(e),e.beeArr.push(o),e.shootPoint.beeNum++}e.updateBee()},t.prototype.toolState=function(){for(var e=this,t=["hammer","hat","lamp"],r=function(r){var i=userDataMaster.tool[t[r]];userDataMaster.level+1>=i.level?(i.num>0&&(e[t[r]+"_add"].visible=!1,e[t[r]+"_num"].visible=!0,e[t[r]+"_num"].text="X"+i.num),i.unlock||(userDataMaster.tool[t[r]].unlock=!0),e[t[r]].addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.judgeTool(t[r])
},o)):(e[t[r]+"_img"].texture=RES.getRes("icn_lock_png"),e[t[r]+"_text"].visible=!0,e[t[r]+"_add"].visible=!1)},o=this,i=0;i<t.length;i++)r(i)},t.prototype.judgeTool=function(e){function t(){userDataMaster.tool[e].num++,r[e+"_add"].visible=!1,r[e+"_num"].visible=!0,r[e+"_num"].text="X"+userDataMaster.tool[e].num}console.log(e,userDataMaster.tool[e]);var r=this;if(userDataMaster.tool[e].num>0){if(r.tooling=e,userDataMaster.tool[e].num--,r[e+"_add"].visible=!0,r[e+"_num"].visible=!1,"hammer"==e){var o=new eui.Rect(r.stage.stageWidth,r.stage.stageHeight,0);o.alpha=.7,r.addChildAt(o,9),r.hammerShow=o}else if("hat"==e);else if("lamp"==e){var i=r.createBitmapByName("img_prop_e1");i.x=(r.stage.stageWidth-i.width)/2,i.y=195,r.addChild(i),r.lampShow=i}}else AdMaster.useVideo(function(){t()},function(){CallbackMaster.openShare(function(){t()})})},t.prototype.createCeil=function(){for(var e=[{x:682,y:489,width:.4,height:20},{x:-10,y:489,width:.4,height:20},{x:345,y:-10,width:13.8,height:.4},{x:345,y:945,width:13.8,height:.4}],t=0,r=e.length;r>t;t++){var o=e[t],i=new p2.Body({mass:1,position:[this.getPosition(o.x,2),this.getPosition(o.y)],type:p2.Body.KINEMATIC}),n=new p2.Box({width:o.width,height:o.height});n.collisionGroup=6,n.collisionMask=5,i.addShape(n),i.displays=[],this.world.addBody(i),this.ceilArr.push(i)}},t.prototype.getPosition=function(e,t){void 0===t&&(t=1);var r=this.adaptParams,o=0;return o=1==t?(this.stage.stageHeight-(r.gridAreaTop+e))/this.factor:(r.gridAreaLeft+e)/this.factor},t.prototype.updateProccess=function(e){void 0===e&&(e=0);var t=this;0==e?(t.myData.amount++,t.amountText.text=t.myData.amount+"/"+t.levelInfo.amount,t.amountPro.width=t.myData.amount/t.levelInfo.amount*100,t.myData.amount>=t.levelInfo.amount&&console.log("level up")):(t.myData.score+=e,t.myData.star<1&&t.myData.score>=.34*t.levelInfo.score&&(t.star_1.texture=RES.getRes("img_star_b1_png"),t.myData.star=1),t.myData.star<2&&t.myData.score>=.67*t.levelInfo.score&&(t.star_2.texture=RES.getRes("img_star_b1_png"),t.myData.star=2),t.myData.star<3&&t.myData.score>=t.levelInfo.score&&(t.star_3.texture=RES.getRes("img_star_b1_png"),t.myData.star=3),t.scoreText.text=t.myData.score+"",t.changeGraphics())},t.prototype.createGrids=function(e){void 0===e&&(e=1);var t=this;if(t.myData.amount>=t.levelInfo.amount&&(t.removeEventListener(egret.Event.ENTER_FRAME,t.onEnterFrame,t),t.rayGroup.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,t.touchBeginFun,t),t.rayGroup.removeEventListener(egret.TouchEvent.TOUCH_MOVE,t.touchMoveFun,t),t.rayGroup.removeEventListener(egret.TouchEvent.TOUCH_END,t.touchEndFun,t),sceneMaster.openModal(new levelUpModal(t.levelInfo.level,t.myData))),!(t.levelInfo.existAmount>=t.levelInfo.amount)){t.myData.line++;for(var r=0;7>r;r++){var o=void 0,i=Math.random();if(!(i>.7)){if(.5>i&&t.levelInfo.existAmount<t.levelInfo.amount){var n=Math.floor(1+t.levelInfo.level+t.myData.line);o=new gridCom(n),t.levelInfo.existAmount++}else.6>i?o=new ballCom:.7>i&&(o=new starCom);var a=r*t.adaptParams.itemWidth+t.adaptParams.itemWidth/2,s=e*t.adaptParams.itemWidth+t.adaptParams.itemWidth/2;t.world.addBody(o.createBody(t.getPosition(a,2),t.getPosition(s),t)),t.gridArr.push(o)}}}},t.prototype.touchBeginFun=function(e){function t(){r.rayGroup.addEventListener(egret.TouchEvent.TOUCH_MOVE,r.touchMoveFun,r),r.rayGroup.addEventListener(egret.TouchEvent.TOUCH_END,r.touchEndFun,r),r.tooling=null,r.hammerShow.parent&&r.hammerShow.parent.removeChild(r.hammerShow)}if(!this.shooting){var r=this;if(r.hammerShow&&"hammer"==r.tooling){r.rayGroup.removeEventListener(egret.TouchEvent.TOUCH_MOVE,r.touchMoveFun,r),r.rayGroup.removeEventListener(egret.TouchEvent.TOUCH_END,r.touchEndFun,r);for(var o=function(o,i){var n=r.gridArr[o].img.hitTestPoint(e.stageX,e.stageY);return n?(3==r.gridArr[o].type||4==r.gridArr[o]?r.gridArr[o].updateText(r,function(){r.gridArr[o].img.parent&&4==r.gridArr[o].type&&(r.world.removeBody(r.gridArr[o].boxBody),r.gridArr[o].img.parent.removeChild(r.gridArr[o].img)),r.gridArr.splice(o,1),t()}):r.gridArr[o].updateText(r,r.gridArr[o].num,function(){r.updateProccess(),t()}),"break"):void 0},i=0,n=this.gridArr.length;n>i;i++){var a=o(i,n);if("break"===a)break}}else this.touchMoveFun(e)}},t.prototype.useTool=function(e){},t.prototype.touchMoveFun=function(e){this.shooting||(this.shootPoint.ex=e.stageX,this.shootPoint.ey=e.stageY,this.shootPoint.speedy=1,this.rayGroup.removeChildren(),this.testRay())},t.prototype.touchEndFun=function(e){var t=this;if(!this.shooting){this.shootPoint.speedy=3,this.shootPoint.ex=e.stageX,this.shootPoint.ey=e.stageY;var r=t.shootPoint.ex-t.shootPoint.bx,o=t.shootPoint.ey-t.shootPoint.by,i=t.shootPoint.bx/t.factor,n=(t.stage.stageHeight-t.shootPoint.by)/t.factor;this.rayGroup.removeChildren(),this.hero.rotation=0,setTimeout(function(){t.shooting=!0,console.log("shoot",t.shooting)},100);for(var a=function(e){var a=t.beeArr[e].boxBody;setTimeout(function(){egret.Tween.removeTweens(a.displays[0]),a.position[0]=i,a.position[1]=n,a.velocity=[r/t.factor,-o/t.factor],a.gravityScale=0,t.updateSpeed(a)},150*e)},s=0;s<t.beeArr.length;s++)a(s)}},t.prototype.testRay=function(){var e=this,t=e.shootPoint.bx/e.factor,r=(e.stage.stageHeight-e.shootPoint.by)/e.factor,o=e.shootPoint.ex/e.factor,i=(e.stage.stageHeight-e.shootPoint.ey)/e.factor,n=o-t,a=i-r,s=new p2.Ray({from:[t,r],to:[o+25/a*n,i+25],mode:p2.Ray.CLOSEST,checkCollisionResponse:!0,skipBackfaces:!1,collisionGroup:1,collisionMask:4});e.hero.rotation=350;var l=new p2.RaycastResult;e.world.raycast(l,s),l&&l.body&&(e.createLine(l,s),e.testRay2(l,s))},t.prototype.testRay2=function(e,t,r){void 0===r&&(r=!1);var o=this,i=[0,0];e.getHitPoint(i,t);var n=i[0],a=i[1],s=0,l=0;if(Math.abs(e.normal[0])<1e-15)s=2*n-t.from[0],l=t.from[1];else if(Math.abs(e.normal[1])<1e-15)s=t.from[0],l=2*a-t.from[1];else{var u=e.normal[1]/e.normal[0],d=(t.from[0]-i[0]-u*u*t.from[0]+u*u*i[0]+2*u*t.from[1]-2*u*i[1])/(u*u+1),c=u*t.from[0]-u*t.from[1]+d*u-i[0]+i[1];d+=i[0],c+=i[1],s=d,l=c}var h=s-n,p=l-a;s>n&&h*p>=0||n>s&&0>=h*p?(n+=.1/p*h,a+=.1,s+=25/p*h,l+=25):(n-=.1/p*h,a-=.1,s-=25/p*h,l-=25);var g=new p2.Ray({from:[n,a],to:[s,l],mode:p2.Ray.CLOSEST,checkCollisionResponse:!0,skipBackfaces:!1,collisionGroup:1,collisionMask:4});o.hero.rotation=350;var m=new p2.RaycastResult;o.world.raycast(m,g),m&&m.body&&(!r&&g.to[1]>7&&o.testRay2(m,g,!0),o.createLine(m,g))},t.prototype.createLine=function(e,t){for(var r=this,o=(r.shootPoint.bx/r.factor,(r.stage.stageHeight-r.shootPoint.by)/r.factor,e.getHitDistance(t)),i=t.to[0]-t.from[0],n=t.to[1]-t.from[1],a=0;o-1>a;a++){var s=r.createBitmapByName("point");s.width=10,s.height=10,s.anchorOffsetX=s.width/2,s.anchorOffsetY=s.height/2,s.x=(t.from[0]+i/t.length*a)*r.factor-r.rayGroup.x,s.y=r.stage.stageHeight-(t.from[1]+n/t.length*a)*r.factor-r.rayGroup.y,this.rayGroup.addChild(s)}var l=r.createBitmapByName("arrow");l.width=10,l.height=10,l.anchorOffsetX=l.width/2,l.anchorOffsetY=l.height/2,l.x=(t.from[0]+i/t.length*(o-.5))*r.factor-r.rayGroup.x,l.y=r.stage.stageHeight-(t.from[1]+n/t.length*(o-.5))*r.factor-r.rayGroup.y,this.rayGroup.addChild(l)},t.prototype.onBeginContact=function(e){var t=this,r=e.bodyA,o=e.bodyB,i=7==r.shapes[0].collisionMask&&o.type==p2.Body.KINEMATIC,n=7==o.shapes[0].collisionMask&&r.type==p2.Body.KINEMATIC,a=7==r.shapes[0].collisionMask&&7==o.shapes[0].collisionMask;if(i||n||a)return r.velocity[0]&&(r.velocity[0]=-r.velocity[0]),void(o.velocity[0]&&(o.velocity[0]=-o.velocity[0]));for(var s=0;s<t.beeArr.length;s++){var l=t.beeArr[s].boxBody;if(r.id==l.id||o.id==l.id){var u;if(r.id==l.id?u=o:o.id==l.id&&(u=r),u.id==t.ceilArr[0].id||u.id==t.ceilArr[1].id||u.id==t.ceilArr[2].id)return void(l.angle=0);if(u.id==t.ceilArr[3].id)return l.angle=0,l.fixedRotation=!0,l.gravityScale=1,void(l.velocity=[0,-t.shootPoint.speedy]);for(var d=function(e){if(t.gridArr[e].boxBody.id==u.id){if(3==t.gridArr[e].type){if(!t.gridArr[e].isRemoved){t.shootPoint.beeNum++;var r=t.gridArr[e].boxBody.position[0];t.gridArr[e].updateText(t,function(){var e=new beeCom;e.createBody(t,r),t.beeArr.push(e),t.myData.beeNum++,t.bulletNum.text="X"+t.myData.beeNum})}}else if(4==t.gridArr[e].type)t.beeArr[s].powerUp(2),t.gridArr[e].updateText(t);else if(!t.gridArr[e].isRemoved){var o=t.beeArr[s].power>t.gridArr[e].num?t.gridArr[e].num:t.beeArr[s].power;t.updateProccess(o);var i=t.beeArr[s].power;"hat"==t.tooling&&(i*=2),t.gridArr[e].updateText(t,i,function(e){t.updateProccess()})}return"break"}},c=0;c<t.gridArr.length;c++){var h=d(c);if("break"===h)break}break}}},t.prototype.getPlayerContactPos=function(){},t.prototype.onEndContact=function(e){var t=e.bodyA,r=e.bodyB;5==t.id||5==r.id},t.prototype.onEnterFrame=function(){var e=this,t=egret.getTimer()-this.currentTimer;if(!(10>t||t>1e3)){this.world.step(t/this.worldSpeed),this.currentTimer=egret.getTimer();for(var r=egret.MainContext.instance.stage.stageHeight,o=this.world.bodies.length,i=0;o>i;i++)for(var n=this.world.bodies[i],a=n.displays.length,s=0;a>s;s++){var l=n.displays[s];l&&(0==s&&(l.anchorOffsetX=n.displays[0].width/2),l.x=n.position[0]*this.factor,l.y=r-n.position[1]*this.factor,l.rotation=180*n.angle/Math.PI)}for(var u=0,d=0,c=this.beeArr.length;c>d;d++){var h=this.beeArr[d].boxBody;if(h.position[1]<=e.getPosition(856)){if(u++,0==h.gravityScale&&(h.velocity[0]=0,h.angle=0,h.displays[0].rotation=0,h.gravityScale=1,this.beeArr[d].powerUp(1),!e.shootPoint.floor)){e.shootPoint.floor=!0,e.shootPoint.bx=h.position[0]*e.factor;var p=e.shootPoint.bx+e.hero.anchorOffsetX-e.hero.width/2,g=Math.abs(e.hero.x-p);egret.Tween.get(e.hero).to({x:p},g)}d==c-1&&u==c&&e.shooting&&e.shootPoint.beeNum==c&&(console.log("enter",e.shooting),e.shooting=!1,e.shootPoint.floor=!1,"lamp"!=e.tooling&&(e.tooling=null),setTimeout(function(){e.updateGrids(),e.updateBee()},100))}else 0==h.gravityScale?this.updateSpeed(h):e.prepare&&(h.velocity[1]=-e.shootPoint.speedy,this.beeArr[d].powerUp(1))}for(var m=e.gridArr.length,f=m-1;f>=0;f--)if(6==e.gridArr[f].type&&Math.abs(e.gridArr[f].boxBody.velocity[0])>0){var v=e.gridArr[f].boxBody.velocity[0]>0?.5:-.5;e.gridArr[f].boxBody.velocity[0]=v}}},t.prototype.updateBee=function(){var e=this,t=e.shootPoint.bx/e.factor,r=.8,o=e.hero.width/2/e.factor;t>7.5&&(r=-r,o=-o);for(var i=0,n=0,a=e.beeArr.length;a>n;n++)e.beeArr[n].boxBody.position[0]=n*r+t+o,e.beeArr[n].boxBody.position[0]>13||e.beeArr[n].boxBody.position[0]<2?e.beeArr[n].boxBody.position[0]=n%i*r+t+o/2:i=n},t.prototype.updateGrids=function(){var e=this;if(console.log(7657,e.tooling,e.lampShow),"lamp"==e.tooling&&e.lampShow)return e.tooling=null,void setTimeout(function(){e.lampShow.parent&&e.lampShow.parent.removeChild(e.lampShow),e.lampShow=null},500);for(var t=e.gridArr.length,r=t-1;r>=0;r--)if(e.gridArr[r].isRemoved)e.gridArr[r].img.parent&&4==e.gridArr[r].type&&(e.world.removeBody(e.gridArr[r].boxBody),e.gridArr[r].img.parent.removeChild(e.gridArr[r].img)),e.gridArr.splice(r,1);else{var o=e.gridArr[r].boxBody.position[1];if(o<=e.getPosition(7.5*e.adaptParams.itemWidth)){if(console.log("gameOver"),e.removeEventListener(egret.Event.ENTER_FRAME,e.onEnterFrame,e),e.rayGroup.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,e.touchBeginFun,e),e.rayGroup.removeEventListener(egret.TouchEvent.TOUCH_MOVE,e.touchMoveFun,e),e.rayGroup.removeEventListener(egret.TouchEvent.TOUCH_END,e.touchEndFun,e),e.myData.reborn>=1)sceneMaster.openModal(new gameOver(e.levelInfo.level,e.myData));else{var i=new rebornModal(e.levelInfo.level,e.myData);sceneMaster.openModal(i),i.rebornBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,e.rebornFun,this)}return}o<=e.getPosition(6.5*e.adaptParams.itemWidth)&&console.log("danger"),e.gridArr[r].boxBody.position[1]=o-e.adaptParams.itemWidth/e.factor}e.createGrids()},t.prototype.rebornFun=function(){function e(){t.myData.reborn++,sceneMaster.closeModal(),t.currentTimer=egret.getTimer(),t.addEventListener(egret.Event.ENTER_FRAME,t.onEnterFrame,t);for(var e=t.gridArr.length,r=e-1;r>=0;r--)if(t.gridArr[r].isRemoved)t.gridArr[r].img.parent&&4==t.gridArr[r].type&&(t.world.removeBody(t.gridArr[r].boxBody),t.gridArr[r].img.parent.removeChild(t.gridArr[r].img)),t.gridArr.splice(r,1);else{var o=t.gridArr[r].boxBody.position[1];t.gridArr[r].boxBody.position[1]=o+t.adaptParams.itemWidth/t.factor*3}t.rayGroup.addEventListener(egret.TouchEvent.TOUCH_BEGIN,t.touchBeginFun,t),t.rayGroup.addEventListener(egret.TouchEvent.TOUCH_MOVE,t.touchMoveFun,t),t.rayGroup.addEventListener(egret.TouchEvent.TOUCH_END,t.touchEndFun,t)}var t=this;AdMaster.useVideo(function(){e()},function(){CallbackMaster.openShare(function(){e()})})},t.prototype.updateSpeed=function(e){var t=e.velocity;Math.abs(t[1])<.5&&(console.log("垂直速度为",t[1]),t[1]=-.5);var r=Math.sqrt(this.ballSpeed/(t[0]*t[0]+t[1]*t[1]));e.velocity=[r*t[0],r*t[1]];var o=Math.atan(t[1]/t[0]);0>o&&(o=2*Math.PI+o),o=-(o-Math.PI/2),t[0]<0&&(o-=Math.PI),e.angle=o},t.prototype.createBitmapByName=function(e){var t=new egret.Bitmap,r=RES.getRes(e+"_png");return t.texture=r,t},t.prototype.changeGraphics=function(){var e=this.myData.score/this.levelInfo.score;e=e>1?1:e;var t=2*e*Math.PI*3/4+.55*Math.PI;this.arcPro.graphics.clear(),this.arcPro.graphics.lineStyle(14,16768862,1),this.arcPro.graphics.drawArc(60,60,50,.55*Math.PI,t,!1),this.arcPro.graphics.endFill()},t}(eui.Component);__reflect(runningScene.prototype,"runningScene",["eui.UIComponent","egret.DisplayObject"]);var startScene=function(e){function t(){var t=e.call(this)||this;return t.targetArr=["lifeGroup","goldGroup","openLife","openShare","openBullet","openShop","openRank","openGift"],t}return __extends(t,e),t.prototype.partAdded=function(t,r){e.prototype.partAdded.call(this,t,r)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.bgImg?this.init():this.addEventListener(egret.Event.COMPLETE,this.init,this)},t.prototype.init=function(){var e=this;e.bgImg.height=e.stage.stageHeight,e.navGroup.y+=e.stage.stageHeight-1334,this.liftText.text=userDataMaster.life+"/5",this.goldText.text=userDataMaster.gold+"",this.createRecommand();var t=new levelCom;this.addChildAt(t,1),t.scroller.height=this.stage.stageHeight;var r=new cloudCom("cloud_top");this.addChildAt(r,2);var o=new cloudCom("cloud_bottom");this.addChildAt(o,3),o.y=this.stage.stageHeight-o.height,e.addEventListener(egret.TouchEvent.TOUCH_TAP,e.judgeFun,e),userDataMaster.myCollection.addEventListener(eui.CollectionEvent.COLLECTION_CHANGE,this.dataChange,this)},t.prototype.createRecommand=function(e){void 0===e&&(e=0);var t=this;if(userDataMaster.recommand&&userDataMaster.recommand[1]&&userDataMaster.recommand[1].games){var r=new eui.DataGroup,o=userDataMaster.recommand[1].games.slice(0,3),i=new eui.ArrayCollection(o);r.dataProvider=i;var n=new eui.VerticalLayout;n.gap=20,r.layout=n,r.itemRenderer=moreItem,t.moreGroup.addChild(r),t.moreComponent=moreComponent.getInstance(),t.moreComponent.y=147,t.addChild(t.moreComponent),t.moreComponent.changeArea.texture=RES.getRes("btn_more_game_png")}else e++,setTimeout(function(){t.createRecommand(e)},300)},t.prototype.dataChange=function(e){this.liftText.text=userDataMaster.life+"/5",this.goldText.text=userDataMaster.gold+""},t.prototype.judgeFun=function(e){var t=this;if(!sceneMaster.modal)for(var r=0,o=t.targetArr;r<o.length;r++){var i=o[r],n=t[i],a=e.stageX-(n.x-n.anchorOffsetX+n.parent.x),s=e.stageY-(n.y-n.anchorOffsetY+n.parent.y);if(a>0&&a<n.width&&s>0&&s<n.height)return void(t[i+"Fun"]&&t[i+"Fun"]())}},t.prototype.lifeGroupFun=function(){var e=this;e.openLifeFun()},t.prototype.goldGroupFun=function(){function e(){userDataMaster.myGold=userDataMaster.gold+10,sceneMaster.openModal(new getSuccess("img_diamond_big_png","X10"))}AdMaster.useVideo(function(){e()},function(){CallbackMaster.openShare(function(){e()})})},t.prototype.openLifeFun=function(){sceneMaster.openModal(new getLifeModal)},t.prototype.openShareFun=function(){CallbackMaster.openShare(null,!1)},t.prototype.openBulletFun=function(){sceneMaster.openModal(new myShop)},t.prototype.openShopFun=function(){sceneMaster.openModal(new teachModal)},t.prototype.openRankFun=function(){sceneMaster.openModal(new rankModal)},t.prototype.openGiftFun=function(){var e=this;e.red_dot.parent&&e.red_dot.parent.removeChild(e.red_dot),sceneMaster.openModal(new giftModal)},t}(eui.Component);__reflect(startScene.prototype,"startScene",["eui.UIComponent","egret.DisplayObject"]),window.Main=Main;